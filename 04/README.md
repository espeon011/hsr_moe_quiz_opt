# 教育部の難問その 4

## 問題文

> ハワード、フィリップ、ジョイスの3人のうち、1人は善人、1人は悪人、1人は嘘つきです。
> 善人は事実しか言わず、悪人は嘘しか言いません。
> 嘘つきは事実を言ったかと思えば、嘘を言うというように、何でも言います。
> ある日、ジョイスが「フィリップは善人ではなく悪人だ」と言いました。
> そしてフィリップは「ハワードとジョイスのどちらか1人は善人だ」と言いました。
> 3人のうち、嘘つきは誰でしょうか？

## 解き方

フィリップの発言に注目する. 
フィリップが善人だとすると発言内容は事実であるはずだが, フィリップ以外にももう 1 人善人がいることになり, 矛盾. 
フィリップが悪人だとすると発言内容は誤りであるはずだが, ハワードとジョイスは両方とも善人でないとなると今度は善人が 1 人もいなくなるので矛盾. 
従って嘘つきはフィリップである. 
ちなみにフィリップが嘘つきなのでジョイスの主張は誤りとなり, ジョイスが悪人で確定する. よってハワードが善人であることもわかる. 

## 定式化

ハワード, フィリップ, ジョイスをそれぞれ $1$, $2$, $3$ とする. 

### 決定変数

- $x_i \in \{0, 1\}$: (for $i = 1, 2, 3$): $i$ は善人
- $y_i \in \{0, 1\}$: (for $i = 1, 2, 3$): $i$ は悪人
- $z_i \in \{0, 1\}$: (for $i = 1, 2, 3$): $i$ は嘘つき

### 制約条件

- $x_i + y_i + z_i = 1$ (for $i = 1, 2, 3$): 善人か悪人か嘘つきのどれか
- $\sum_{i=1}^3 x_i = 1$: 善人は 1 人
- $\sum_{i=1}^3 y_i = 1$: 悪人は 1 人
- $\sum_{i=1}^3 z_i = 1$: 嘘つきは 1 人
- $x_3 \le 1 - x_2$ and $x_3 \le y_2$: ジョイスはフィリップが善人ではなく悪人であると主張している
- $y_3 \le x_2 + (1 - y_2)$: ジョイスが悪人である場合, 上記の NOT が成立する. 
- $x_2 \le x_1 + x_3$: フィリップはハワードとジョイスのどちらか 1 人は善人であると主張している
- $y_2 \le 1 - x_1$ and $y_2 \le 1 - x_3$: フィリップが悪人である場合, 上記の NOT が成立する

### 実行結果

```shell
$ dotnet run -c Release
Solution #1: time = 0.00 s
  Howard  is a good guy
  Philip  is a liar
  Joyce   is a bad guy
Number of solutions found: 1
```
